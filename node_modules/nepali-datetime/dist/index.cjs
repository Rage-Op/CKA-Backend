"use strict";const dateConverter=require("./shared/nepali-datetime.c51ed51d.cjs"),LOCALE_EN="en",LOCALE_NE="ne",UTC_OFFSET_IN_MS=207e5,OLD_UTC_OFFSET_IN_MS=198e5,TIMEZONE_TRANSITION_TIMESTAMP=5049018e5,TIMEZONE_TRANSITION_DATE_REFERENCE=new Date(1986,0,1,0,15),MONTHS_EN=["Baisakh","Jestha","Asar","Shrawan","Bhadra","Aswin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"],MONTHS_SHORT_EN=["Bai","Jes","Asa","Shr","Bhd","Asw","Kar","Man","Pou","Mag","Fal","Cha"],MONTHS_NP=["\u092C\u0948\u0936\u093E\u0916","\u091C\u0947\u0920","\u0905\u0938\u093E\u0930","\u0936\u094D\u0930\u093E\u0935\u0923","\u092D\u093E\u0926\u094D\u0930","\u0906\u0936\u094D\u0935\u093F\u0928","\u0915\u093E\u0930\u094D\u0924\u093F\u0915","\u092E\u0902\u0938\u093F\u0930","\u092A\u094C\u0937","\u092E\u093E\u0918","\u092B\u093E\u0932\u094D\u0917\u0941\u0923","\u091A\u0948\u0924\u094D\u0930"],MONTHS_SHORT_NP=["\u092C\u0948","\u091C\u0947","\u0905","\u0936\u094D\u0930\u093E","\u092D\u093E","\u0906","\u0915\u093E","\u092E\u0902","\u092A\u094C","\u092E\u093E","\u092B\u093E","\u091A\u0948"],NUM_NP=["\u0966","\u0967","\u0968","\u0969","\u096A","\u096B","\u096C","\u096D","\u096E","\u096F"],WEEKDAYS_SHORT_EN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],WEEKDAYS_LONG_EN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],WEEKDAYS_SHORT_NP=["\u0906\u0907\u0924","\u0938\u094B\u092E","\u092E\u0902\u0917\u0932","\u092C\u0941\u0927","\u092C\u093F\u0939\u093F","\u0936\u0941\u0915\u094D\u0930","\u0936\u0928\u093F"],WEEKDAYS_LONG_NP=["\u0906\u0907\u0924\u092C\u093E\u0930","\u0938\u094B\u092E\u092C\u093E\u0930","\u092E\u0902\u0917\u0932\u092C\u093E\u0930","\u092C\u0941\u0927\u092C\u093E\u0930","\u092C\u093F\u0939\u093F\u092C\u093E\u0930","\u0936\u0941\u0915\u094D\u0930\u092C\u093E\u0930","\u0936\u0928\u093F\u092C\u093E\u0930"],FORMAT_TOKEN_REGEX=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DD?|ddd?d?|do?|YYYY|YY|y{2,4}|yo?|a|A|hh?|HH?|mm?|ss?|SSS|x|X|.)/g,getNepalDateAndTime=s=>{const t=s.getTime(),i=t<TIMEZONE_TRANSITION_TIMESTAMP?OLD_UTC_OFFSET_IN_MS:UTC_OFFSET_IN_MS,u=new Date(t+i),r=u.getUTCFullYear(),a=u.getUTCMonth(),l=u.getUTCDate(),h=u.getUTCHours(),M=u.getUTCMinutes(),E=u.getUTCSeconds(),p=u.getUTCMilliseconds(),f=u.getUTCDay();return{year:r,month0:a,day:l,hour:h,minute:M,second:E,ms:p,weekDay:f}},getDate=(s,t,i,u,r,a,l)=>{const h=new Date(s,t,i,u,r,a,l);let M=h<TIMEZONE_TRANSITION_DATE_REFERENCE?OLD_UTC_OFFSET_IN_MS:UTC_OFFSET_IN_MS;const E=-1*h.getTimezoneOffset()*60*1e3;return new Date(h.getTime()-M+E)},parseFormatTokens=s=>{const t=s.match(FORMAT_TOKEN_REGEX);return t?t.map(i=>i.startsWith("[")&&i.endsWith("]")?i.slice(1,-1):i):[]},seqToRE=s=>{if(s.length===0)return new RegExp("");let t=[...s];if(t=t.sort((u,r)=>r.length-u.length),t[0]==="")return new RegExp("");const i=`(${t.join("|")})`;return new RegExp(i)},o$1=s=>s.toString().padStart(2,"0"),g=s=>s.toString().padStart(3,"0"),y=s=>s.split("").map(t=>NUM_NP[t.charCodeAt(0)-48]).join(""),e=(s,t)=>{const i=typeof s=="string"?s:String(s);return t!==LOCALE_NE?i:y(i)},O=(s,t)=>e(s.getYear(),t).substring(2),Y$1=(s,t)=>e(s.getYear(),t),L=(s,t)=>e(s.getMonth()+1,t),A=(s,t)=>e(o$1(s.getMonth()+1),t),w=(s,t)=>t===LOCALE_NE?MONTHS_SHORT_NP[s.getMonth()]:MONTHS_SHORT_EN[s.getMonth()],P=(s,t)=>t===LOCALE_NE?MONTHS_NP[s.getMonth()]:MONTHS_EN[s.getMonth()],$=(s,t)=>e(s.getDate(),t),C=(s,t)=>e(o$1(s.getDate()),t),R=(s,t)=>e(s.getDay(),t),c=(s,t)=>t===LOCALE_NE?WEEKDAYS_SHORT_NP[s.getDay()]:WEEKDAYS_SHORT_EN[s.getDay()],k=(s,t)=>t===LOCALE_NE?WEEKDAYS_LONG_NP[s.getDay()]:WEEKDAYS_LONG_EN[s.getDay()],K=(s,t)=>e(s.getHours(),t),W=(s,t)=>e(o$1(s.getHours()),t),x$1=(s,t)=>{const i=s.getHours(),u=i>12?i-12:i;return e(u,t)},z=(s,t)=>{const i=s.getHours(),u=i>12?i-12:i;return e(o$1(u),t)},G=(s,t)=>e(s.getMinutes(),t),U=(s,t)=>e(o$1(s.getMinutes()),t),j=(s,t)=>e(s.getSeconds(),t),I=(s,t)=>e(o$1(s.getSeconds()),t),Z=(s,t)=>e(g(s.getMilliseconds()),t),q=(s,t)=>t===LOCALE_NE?"A":s.getHours()>=12?"PM":"AM",v=(s,t)=>t===LOCALE_NE?"a":s.getHours()>=12?"pm":"am",N$1={YY:O,YYYY:Y$1,M:L,MM:A,MMM:w,MMMM:P,D:$,DD:C,d:R,dd:c,ddd:c,dddd:k,H:K,HH:W,h:x$1,hh:z,m:G,mm:U,s:j,ss:I,SSS:Z,A:q,a:v},d$1=(s,t,i)=>{const u=parseFormatTokens(t),r=a=>a in N$1?N$1[a](s,i):a;return u.map(r).join("")},format=(s,t)=>d$1(s,t,LOCALE_EN),formatNepali=(s,t)=>d$1(s,t,LOCALE_NE),nepaliDateToString=s=>{const t=o$1(s.getYear()),i=o$1(s.getMonth()+1),u=o$1(s.getDate()),r=o$1(s.getHours()),a=o$1(s.getMinutes()),l=o$1(s.getSeconds()),h=s.getMilliseconds(),M=h===0?"":`.${g(h)}`;return`${t}-${i}-${u} ${r}:${a}:${l}${M}`};function N(s){const t=s.split(/[-./]/,3),[i,u=1,r=1]=t.map(a=>{const l=parseInt(a,10);if(Number.isNaN(l))throw new Error("Invalid date");return l});return[i,u-1,r]}function x(s){if(!s)return[0,0,0,0];const[t,i="0"]=s.split(".",2),u=t.split(":",3),[r,a=0,l=0]=u.map(M=>{const E=parseInt(M,10);if(Number.isNaN(E))throw new Error("Invalid time");return E});let h=parseInt(i,10);return Number.isNaN(h)&&(h=0),[r,a,l,h]}function parse(s){const[t,i]=s.split(" ",2),[u,r,a]=N(t),[l,h,M,E]=x(i);return[u,r,a,l,h,M,E]}const b={YY:/(\d\d)/,YYYY:/(\d\d\d\d)/,M:/(1[0-2]|0[1-9]|[1-9])/,MM:/(1[0-2]|0[1-9]|[1-9])/,D:/(3[0-2]|[1-2]\d|0[1-9]|[1-9]| [1-9])/,DD:/(3[0-2]|[1-2]\d|0[1-9]|[1-9]| [1-9])/,H:/(2[0-3]|[0-1]\d|\d)/,HH:/(2[0-3]|[0-1]\d|\d)/,hh:/(1[0-2]|0[1-9]|[1-9])/,mm:/([0-5]\d|\d)/,ss:/([0-5]\d|\d)/,SSS:/(\d\d\d)/,A:/(AM|PM)/,a:/(am|pm)/,MMMM:seqToRE(MONTHS_EN),MMM:seqToRE(MONTHS_SHORT_EN),dddd:seqToRE(WEEKDAYS_LONG_EN),ddd:seqToRE(WEEKDAYS_SHORT_EN),dd:seqToRE(WEEKDAYS_SHORT_EN),d:/([0-6])/};function Y(s){const t=[],i=[];for(const r of s)r in b?(t.push(r),i.push(b[r].source)):i.push(r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));const u=i.join("");return{dateTokens:t,regex:new RegExp(`^${u}$`)}}function T(s,t){let[i,u,r,a,l,h,M,E]=[0,1,1,0,0,0,0,0],p=!1,f=!1;for(let S=0;S<s.length;S++){const H=s[S],F=parseInt(t[S+1]);switch(H){case"YYYY":i=F;break;case"YY":i=2e3+parseInt(t[S]);break;case"MM":case"M":u=F;break;case"MMMM":u=MONTHS_EN.indexOf(t[S+1])+1;break;case"MMM":u=MONTHS_SHORT_EN.indexOf(t[S+1])+1;break;case"DD":case"D":r=F;break;case"HH":case"H":a=F;break;case"hh":case"h":l=F,f=!0;break;case"mm":case"m":h=F;break;case"ss":case"s":M=F;break;case"SSS":E=F;break;case"A":case"a":p=t[S+1].toLowerCase()==="pm"}}return f&&(a=l+(p?12:0)),{year:i,month0:u-1,day:r,hour:a,minute:h,second:M,ms:E}}function parseFormat(s,t){const i=parseFormatTokens(t),{dateTokens:u,regex:r}=Y(i),a=s.match(r);if(!a)throw new Error("Invalid date format");const{year:l,month0:h,day:M,hour:E,minute:p,second:f,ms:S}=T(u,a);return[l,h,M,E,p,f,S]}class ValidationError extends Error{constructor(t){super(t),this.name="ValidationError"}}const validateHour=s=>{if(s<0||s>23)throw new ValidationError("Hour should be in the range 0-23")},validateMinute=s=>{if(s<0||s>59)throw new ValidationError("Minute should be in the range 0-59")},validateSecond=s=>{if(s<0||s>59)throw new ValidationError("Second should be in the range 0-59")},validateMillisecond=s=>{if(s<0||s>999)throw new ValidationError("Millisecond should be in the range 0-999")},validateTime=(s,t,i,u)=>{validateHour(s),validateMinute(t),validateSecond(i),validateMillisecond(u)};var D=Object.defineProperty,d=(s,t,i)=>t in s?D(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,n=(s,t,i)=>(d(s,typeof t!="symbol"?t+"":t,i),i);const o=class _{constructor(...t){if(n(this,"timestamp"),n(this,"year"),n(this,"yearEn"),n(this,"month"),n(this,"monthEn"),n(this,"day"),n(this,"dayEn"),n(this,"hour"),n(this,"minute"),n(this,"weekDay"),t.length===0)this.initFromCurrentDate();else if(t.length===1&&t[0]instanceof Date)this.initFromEnglishDate(t[0]);else if(t.length===1&&t[0]instanceof _)this.initFromNepaliDate(t[0]);else if(t.length===1&&typeof t[0]=="string")this.parseFromString(t[0]);else if(t.length===1&&typeof t[0]=="number")this.initFromTimestamp(t[0]);else if(t.length===2&&typeof t[0]=="string"&&typeof t[1]=="string")this.parseFromStringWithFormat(t[0],t[1]);else if(t.length>=2&&t.length<=8&&t.every(i=>typeof i=="number"))this.initFromComponents(t);else throw new Error("Invalid date argument")}initFromCurrentDate(){this._setDateObject(new Date)}initFromEnglishDate(t){this._setDateObject(t)}initFromNepaliDate(t){this.set(t.year,t.month,t.day,t.hour,t.minute,t.getSeconds(),t.getMilliseconds())}parseFromString(t){const i=parse(t);this.set(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}initFromTimestamp(t){this._setDateObject(new Date(t))}parseFromStringWithFormat(t,i){const u=parseFormat(t,i);this.set(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}initFromComponents(t){this.set(t[0],t[1],t[2]??1,t[3]??0,t[4]??0,t[5]??0,t[6]??0)}_setDateObject(t,i=!0){this.timestamp=t;const{year:u,month0:r,day:a,hour:l,minute:h,weekDay:M}=getNepalDateAndTime(t);if(this.yearEn=u,this.monthEn=r,this.dayEn=a,this.hour=l,this.minute=h,this.weekDay=M,i){const[E,p,f]=dateConverter.e.englishToNepali(u,r,a);this.year=E,this.month=p,this.day=f}}getDateObject(){return this.timestamp}getYear(){return this.year}getEnglishYear(){return this.yearEn}getMonth(){return this.month}getEnglishMonth(){return this.monthEn}getDate(){return this.day}getEnglishDate(){return this.dayEn}getDay(){return this.weekDay}getHours(){return this.hour}getMinutes(){return this.minute}getSeconds(){return this.timestamp.getSeconds()}getMilliseconds(){return this.timestamp.getMilliseconds()}getTime(){return this.timestamp.getTime()}setYear(t){this.set(t,this.month,this.day,this.hour,this.minute,this.timestamp.getSeconds(),this.timestamp.getMilliseconds())}setMonth(t){this.set(this.year,t,this.day,this.hour,this.minute,this.timestamp.getSeconds(),this.timestamp.getMilliseconds())}setDate(t){this.set(this.year,this.month,t,this.hour,this.minute,this.timestamp.getSeconds(),this.timestamp.getMilliseconds())}setHours(t){this.set(this.year,this.month,this.day,t,this.minute,this.timestamp.getSeconds(),this.timestamp.getMilliseconds())}setMinutes(t){this.set(this.year,this.month,this.day,this.hour,t,this.timestamp.getSeconds(),this.timestamp.getMilliseconds())}setSeconds(t){this.set(this.year,this.month,this.day,this.hour,this.minute,t,this.timestamp.getMilliseconds())}setMilliseconds(t){this.set(this.year,this.month,this.day,this.hour,this.minute,this.timestamp.getSeconds(),t)}setTime(t){this._setDateObject(new Date(t))}set(t,i,u,r,a,l,h){validateTime(r,a,l,h);const[M,E,p]=dateConverter.e.nepaliToEnglish(t,i,u);this.year=t,this.month=i,this.day=u,this._setDateObject(getDate(M,E,p,r,a,l,h),!1)}setDateObject(t){this._setDateObject(t,!0)}format(t){return format(this,t)}formatNepali(t){return formatNepali(this,t)}toString(){return nepaliDateToString(this)}static fromEnglishDate(t,i,u,r=0,a=0,l=0,h=0){const M=getDate(t,i,u,r,a,l,h);return new _(M)}};n(o,"minimum"),n(o,"maximum");let m=o;m.minimum=()=>m.fromEnglishDate(dateConverter.e.enMinYear(),0,1).getDateObject(),m.maximum=()=>m.fromEnglishDate(dateConverter.e.enMaxYear(),11,31).getDateObject(),module.exports=m;
